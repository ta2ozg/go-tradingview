<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Solar System Deep Space Enhanced</title>
<style>
body { margin:0; overflow:hidden; background:black; font-family:sans-serif;}
canvas { display:block; position:absolute; top:0; left:0; }
.label {
  position:absolute;
  color:white;
  font-size:12px;
  pointer-events:none;
  text-shadow:0 0 3px black;
}
</style>
</head>
<body>

<canvas id="solarCanvas"></canvas>
<div id="labels"></div>

<!-- Working Three.js CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.152.1/three.min.js"></script>

<script>
// Canvas 2D: Gezegenler ve asteroid kuşağı
const canvas = document.getElementById("solarCanvas");
const ctx = canvas.getContext("2d");
let W = canvas.width = window.innerWidth;
let H = canvas.height = window.innerHeight;
let t = 0, offsetX=0, offsetY=0;
let isDragging=false, dragStart={x:0,y:0};

canvas.addEventListener("mousedown", e=>{isDragging=true; dragStart.x=e.clientX-offsetX; dragStart.y=e.clientY-offsetY;});
canvas.addEventListener("mouseup", ()=>isDragging=false);
canvas.addEventListener("mouseleave", ()=>isDragging=false);
canvas.addEventListener("mousemove", e=>{if(isDragging){offsetX=e.clientX-dragStart.x; offsetY=e.clientY-dragStart.y;}});

// Gezegenler
const planets=[
  {name:"Mercury",color:"#aaa",radius:50,size:4,speed:0.018+Math.random()*0.005,angle:Math.random()*Math.PI*2},
  {name:"Venus",color:"#f5a623",radius:80,size:7,speed:0.013+Math.random()*0.004,angle:Math.random()*Math.PI*2},
  {name:"Earth",color:"#2266ff",radius:110,size:8,speed:0.010+Math.random()*0.003,angle:Math.random()*Math.PI*2},
  {name:"Moon",color:"#fff",radius:20,size:2,speed:0.05+Math.random()*0.01,angle:Math.random()*Math.PI*2,parent:"Earth"},
  {name:"Mars",color:"#ff2200",radius:150,size:6,speed:0.007+Math.random()*0.003,angle:Math.random()*Math.PI*2},
  {name:"Jupiter",color:"#ff8800",radius:220,size:16,speed:0.004+Math.random()*0.002,angle:Math.random()*Math.PI*2},
  {name:"Saturn",color:"#ffcc00",radius:290,size:14,speed:0.003+Math.random()*0.0015,angle:Math.random()*Math.PI*2},
  {name:"Uranus",color:"#66ccff",radius:350,size:11,speed:0.002+Math.random()*0.001,angle:Math.random()*Math.PI*2},
  {name:"Neptune",color:"#0000ff",radius:400,size:10,speed:0.0015+Math.random()*0.001,angle:Math.random()*Math.PI*2}
];

// Labels
const labels={};
const labelDiv = document.getElementById("labels");
const sunLabel = document.createElement("div"); sunLabel.className="label"; sunLabel.textContent="Sun"; labelDiv.appendChild(sunLabel); labels["Sun"]=sunLabel;
planets.forEach(p=>{const l=document.createElement("div");l.className="label";l.textContent=p.name;labelDiv.appendChild(l);labels[p.name]=l;});

// Asteroid kuşağı
const asteroids=[];
for(let i=0;i<300;i++){
  asteroids.push({radius:160+Math.random()*40, angle:Math.random()*Math.PI*2, speed:0.001+Math.random()*0.002, offset:(Math.random()-0.5)*10, depth:Math.random()*0.5});
}

// Draw function
function draw2D(){
  ctx.clearRect(0,0,W,H);
  const cx = W/2 + offsetX, cy = H/2 + offsetY;

  // Sun
  ctx.fillStyle="yellow";
  ctx.beginPath(); ctx.arc(cx,cy,25,0,Math.PI*2); ctx.fill();
  labels["Sun"].style.left=(cx+12)+"px"; labels["Sun"].style.top=(cy-6)+"px";

  // Planets
  planets.forEach(p=>{
    let px,py;
    if(p.parent){
      const parent = planets.find(d=>d.name===p.parent);
      const parentX = cx + parent.radius * Math.cos(t*parent.speed + parent.angle);
      const parentY = cy + parent.radius * Math.sin(t*parent.speed + parent.angle);
      px = parentX + p.radius * Math.cos(t*p.speed + p.angle);
      py = parentY + p.radius * Math.sin(t*p.speed + p.angle);
      ctx.strokeStyle="rgba(255,255,255,0.3)"; ctx.beginPath(); ctx.arc(parentX,parentY,p.radius,0,Math.PI*2); ctx.stroke();
    } else {
      px = cx + p.radius * Math.cos(t*p.speed + p.angle);
      py = cy + p.radius * Math.sin(t*p.speed + p.angle);
      ctx.strokeStyle="rgba(255,255,255,0.2)"; ctx.beginPath(); ctx.arc(cx,cy,p.radius,0,Math.PI*2); ctx.stroke();
    }
    ctx.fillStyle=p.color; ctx.beginPath(); ctx.arc(px,py,p.size,0,Math.PI*2); ctx.fill();
    labels[p.name].style.left=(px+12)+"px"; labels[p.name].style.top=(py-6)+"px";

    if(p.name==="Saturn"){
      ctx.strokeStyle="rgba(200,150,50,0.5)"; ctx.beginPath(); ctx.ellipse(px,py,p.size*6,p.size*2,Math.PI/4,0,Math.PI*2); ctx.stroke();
    }
  });

  // Asteroids
  asteroids.forEach(a=>{
    a.angle+=a.speed;
    const ax = cx + (a.radius+a.offset)*Math.cos(a.angle);
    const ay = cy + (a.radius+a.offset)*Math.sin(a.angle);
    const depthScale = 1 + a.depth*0.5;
    ctx.fillStyle="rgba(200,200,200,"+(0.5+a.depth*0.5)+")";
    ctx.beginPath(); ctx.arc(ax,ay,2*depthScale,0,Math.PI*2); ctx.fill();
  });

  t+=0.02;
}

// Three.js: Galaksi ve yıldızlar
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75,W/H,1,2000);
camera.position.z = 500;

const renderer = new THREE.WebGLRenderer({alpha:true});
renderer.setSize(W,H);
renderer.domElement.style.position="absolute";
renderer.domElement.style.top="0";
renderer.domElement.style.left="0";
document.body.appendChild(renderer.domElement);

// Beyaz yıldızlar
const starGeo = new THREE.BufferGeometry();
const starCount = 2000;
const positions = [];
for(let i=0;i<starCount;i++){
  const r = 1000*Math.random();
  const angle = Math.random()*Math.PI*2;
  const spiral = Math.random()*0.5;
  const x = r*Math.cos(angle)*(1+spiral);
  const y = (Math.random()-0.5)*200;
  const z = r*Math.sin(angle)*(1+spiral);
  positions.push(x,y,z);
}
starGeo.setAttribute('position',new THREE.Float32BufferAttribute(positions,3));
const starMat = new THREE.PointsMaterial({color:0xffffff,size:1.2,transparent:true,opacity:0.8});
const stars = new THREE.Points(starGeo,starMat);
scene.add(stars);

// Hafif galaksi glow
const nebulaGeo = new THREE.SphereGeometry(800,32,32);
const nebulaMat = new THREE.MeshBasicMaterial({color:0x112244,transparent:true,opacity:0.02,side:THREE.BackSide});
const nebula = new THREE.Mesh(nebulaGeo,nebulaMat);
scene.add(nebula);

function animate(){
  requestAnimationFrame(animate);
  draw2D();

  stars.rotation.y += 0.0005;
  stars.rotation.x += 0.0002;
  nebula.rotation.y += 0.0001;

  renderer.render(scene,camera);
}
animate();

window.addEventListener("resize",()=>{
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
  renderer.setSize(W,H);
  camera.aspect=W/H;
  camera.updateProjectionMatrix();
});
</script>
</body>
</html>
